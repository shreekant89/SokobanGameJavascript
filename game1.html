<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(19, 30px);
      gap: 2px;
    }

    .tile {
      width: 30px;
      height: 30px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
    }

    .player {
      background-color: #3498db;
      color: #fff;
    }

    .box {
      background-color: #e74c3c;
    }

    .target {
      background-color: #2ecc71;
    }
  </style>
</head>
<body>

<div class="grid" id="board"></div>

<script>
  const board = document.getElementById('board');
  const player = { row: 0, col: 0 };
  const tileMap = {
    width: 19,
    height: 16,
    mapGrid: [
      [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", "W", "W", "W", "W", "W", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", "W", " ", " ", " ", "W", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", "W", "B", " ", " ", "W", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", "W", "W", "W", " ", " ", "B", "W", "W", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", "W", " ", " ", "B", " ", "B", " ", "W", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      ["W", "W", "W", " ", "W", " ", "W", "W", " ", "W", " ", " ", " ", "W", "W", "W", "W", "W", "W"],
      ["W", " ", " ", " ", "W", " ", "W", "W", " ", "W", "W", "W", "W", "W", " ", " ", "G", "G", "W"],
      ["W", " ", "B", " ", " ", "B", " ", " ", " ", " ", " ", " ", " ", " ", " ", "G", "G", "W"],
      ["W", "W", "W", "W", "W", " ", "W", "W", "W", " ", "W", "P", "W", "W", " ", " ", "G", "G", "W"],
      [" ", " ", " ", " ", "W", " ", " ", " ", " ", " ", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
      [" ", " ", " ", " ", "W", "W", "W", "W", "W", "W", "W", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
    ],
  };

  function buildMap() {
    for (let row = 0; row < tileMap.height; row++) {
      for (let col = 0; col < tileMap.width; col++) {
        const tile = document.createElement("div");
        tile.classList.add("tile");

        switch (tileMap.mapGrid[row][col]) {
          case "P":
            tile.textContent = "👨‍🚀"; // Player emoji
            tile.classList.add("player");
            player.col=col;
            player.row=row;
            break;
          case "B":
            tile.textContent = "📦"; // Box emoji
            tile.classList.add("box");
            break;
          case "G":
            tile.textContent = "🎯"; // Target emoji
            tile.classList.add("target");
            break;
          case "W":
            tile.textContent = "W"; // Target emoji
            tile.classList.add("target");
            break;
        }

        board.appendChild(tile);
      }
    }
  }

  function updateMap() {
    const tiles = document.querySelectorAll('.tile');
    tiles.forEach(tile => tile.remove());

    buildMap();
  }

  function handleKeyPress(event) {
    switch (event.key) {
      case "ArrowUp":
        movePlayer("up");
        break;
      case "ArrowDown":
        movePlayer("down");
        break;
      case "ArrowLeft":
        movePlayer("left");
        break;
      case "ArrowRight":
        movePlayer("right");
        break;
    }
  }

  function movePlayer(direction) {
    const newPosition = { row: player.row, col: player.col };

    switch (direction) {
      case "up":
        newPosition.row -= 1;
        break;
      case "down":
        newPosition.row += 1;
        break;
      case "left":
        newPosition.col -= 1;
        break;
      case "right":
        newPosition.col += 1;
        break;
    }

    // If the new position is a valid move for the player
    if (isValidMove(newPosition)) {
      player.row = newPosition.row;
      player.col = newPosition.col;

      updateMap();
    }
  }

  function isValidMove(position) {
    let res= position.row >= 0 && position.row < tileMap.height &&
           position.col >= 0 && position.col < tileMap.width &&
           tileMap.mapGrid[position.row][position.col] !== "W";

           return res;
  }

  document.addEventListener("keydown", handleKeyPress);
  buildMap();
</script>

</body>
</html>
